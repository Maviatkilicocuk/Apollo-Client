"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mutation=void 0;var _nanoid=require("nanoid");var _data=require("../../data");function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}/* const { nanoid } = require("nanoid");
const { events, locations, users, participants } = require('../../data'); */var Mutation=exports.Mutation={// USer
createUser:function createUser(_,_ref,_ref2){var data=_ref.data;var pubsub=_ref2.pubsub;var newUser={id:(0,_nanoid.nanoid)(),username:data.username,email:data.email};_data.users.push(newUser);pubsub.publish("USER_CREATED",{userCreated:newUser});pubsub.publish("USER_COUNT",{userCount:_data.users.length});return newUser},updateUser:function updateUser(_,_ref3,_ref4){var id=_ref3.id,data=_ref3.data;var pubsub=_ref4.pubsub;var user=_data.users.find(function(u){return u.id==id});if(!user)throw new Error("User not found");Object.assign(user,data);pubsub.publish("USER_UPDATED",{userUpdated:user});return user},deleteUser:function deleteUser(_,_ref5,_ref6){var id=_ref5.id;var pubsub=_ref6.pubsub;var index=_data.users.findIndex(function(u){return u.id==id});if(index===-1)throw new Error("User not found");var deletedUser=_data.users[index];_data.users.splice(index,1);pubsub.publish("USER_DELETED",{userDeleted:deletedUser});pubsub.publish("USER_COUNT",{userCount:_data.users.length});return deletedUser},deleteAllUser:function deleteAllUser(_,__,_ref7){var pubsub=_ref7.pubsub;var count=_data.users.length;_data.users.length=0;pubsub.publish("USER_COUNT",{userCount:_data.users.length});return{count:count}},// Location
createLocation:function createLocation(_,_ref8,_ref9){var data=_ref8.data;var pubsub=_ref9.pubsub;var newLocation=_objectSpread({id:(0,_nanoid.nanoid)()},data);_data.locations.push(newLocation);pubsub.publish("LOCATION_CREATED",{locationCreated:newLocation});return newLocation},updateLocation:function updateLocation(_,_ref0,_ref1){var id=_ref0.id,data=_ref0.data;var pubsub=_ref1.pubsub;var location=_data.locations.find(function(l){return l.id==id});if(!location)throw new Error("Location not found");Object.assign(location,data);pubsub.publish("LOCATION_UPDATED",{locationUpdated:location});return location},deleteLocation:function deleteLocation(_,_ref10,_ref11){var id=_ref10.id;var pubsub=_ref11.pubsub;var index=_data.locations.findIndex(function(l){return l.id==id});if(index===-1)throw new Error("Location not found");var deletedLocation=_data.locations[index];_data.locations.splice(index,1);pubsub.publish("LOCATION_DELETED",{locationDeleted:deletedLocation});return deletedLocation},deleteAllLocation:function deleteAllLocation(){var count=_data.locations.length;_data.locations.length=0;return{count:count}},// Event
createEvent:function createEvent(_,_ref12,_ref13){var data=_ref12.data;var pubsub=_ref13.pubsub;var newEvent=_objectSpread({id:(0,_nanoid.nanoid)()},data);_data.events.push(newEvent);pubsub.publish("EVENT_CREATED",{eventCreated:newEvent});return newEvent},updateEvent:function updateEvent(_,_ref14,_ref15){var id=_ref14.id,data=_ref14.data;var pubsub=_ref15.pubsub;var event=_data.events.find(function(e){return e.id==id});if(!event)throw new Error("Event not found");Object.assign(event,data);pubsub.publish("EVENT_UPDATED",{eventUpdated:event});return event},deleteEvent:function deleteEvent(_,_ref16,_ref17){var id=_ref16.id;var pubsub=_ref17.pubsub;var index=_data.events.findIndex(function(e){return e.id==id});if(index===-1)throw new Error("Event not found");var deletedEvent=_data.events[index];_data.events.splice(index,1);pubsub.publish("EVENT_DELETED",{eventDeleted:deletedEvent});return deletedEvent},deleteAllEvent:function deleteAllEvent(){var count=_data.events.length;_data.events.length=0;return{count:count}},// Participant
createParticipant:function createParticipant(_,_ref18,_ref19){var data=_ref18.data;var pubsub=_ref19.pubsub;var newParticipant=_objectSpread({id:(0,_nanoid.nanoid)()},data);_data.participants.push(newParticipant);pubsub.publish("PARTICIPANT_CREATED",{participantCreated:newParticipant});return newParticipant},updateParticipant:function updateParticipant(_,_ref20,_ref21){var id=_ref20.id,data=_ref20.data;var pubsub=_ref21.pubsub;var participant=_data.participants.find(function(p){return p.id==id});if(!participant)throw new Error("Participant not found");Object.assign(participant,data);pubsub.publish("PARTICIPANT_UPDATED",{participantUpdated:participant});return participant},deleteParticipant:function deleteParticipant(_,_ref22,_ref23){var id=_ref22.id;var pubsub=_ref23.pubsub;var index=_data.participants.findIndex(function(p){return p.id==id});if(index===-1)throw new Error("Participant not found");var deletedParticipant=_data.participants[index];_data.participants.splice(index,1);pubsub.publish("PARTICIPANT_DELETED",{participantDeleted:deletedParticipant});return deletedParticipant},deleteAllParticipant:function deleteAllParticipant(){var count=_data.participants.length;_data.participants.length=0;return{count:count}}};