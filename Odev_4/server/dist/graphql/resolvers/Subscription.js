"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Subscription=void 0;var _graphqlSubscriptions=require("graphql-subscriptions");var _pubsub=_interopRequireDefault(require("../../pubsub"));var _data=require("../../data");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}/* const { withFilter } = require("graphql-subscriptions");
const pubsub = require('../../pubsub');
const { events, locations, users, participants } = require('../../data'); */var Subscription=exports.Subscription={// User
userCreated:{subscribe:(0,_graphqlSubscriptions.withFilter)(function(){return _pubsub["default"].asyncIterator("USER_CREATED")},function(payload,variables){return variables.id?payload.userCreated.id===variables.id:true})},userUpdated:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("USER_UPDATED")}},userDeleted:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("USER_DELETED")}},userCount:{subscribe:function subscribe(parent,args,_ref){var pubsub=_ref.pubsub;setTimeout(function(){pubsub.publish("USER_COUNT",{userCount:_data.users.length})},1000);return pubsub.asyncIterator("USER_COUNT")}},// Event
eventCreated:{subscribe:(0,_graphqlSubscriptions.withFilter)(function(){return _pubsub["default"].asyncIterator("EVENT_CREATED")},function(payload,variables){return variables.user_id?payload.eventCreated.user_id===variables.user_id:true})},eventUpdated:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("EVENT_UPDATED")}},eventDeleted:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("EVENT_DELETED")}},// Location
locationCreated:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("LOCATION_CREATED")}},locationUpdated:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("LOCATION_UPDATED")}},locationDeleted:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("LOCATION_DELETED")}},// Participant
participantCreated:{subscribe:(0,_graphqlSubscriptions.withFilter)(function(){return _pubsub["default"].asyncIterator("PARTICIPANT_CREATED")},function(payload,variables){console.log("payload",payload);console.log("variables",variables);return variables.user_id?payload.participantCreated.user_id===variables.user_id:true})},participantUpdated:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("PARTICIPANT_UPDATED")}},participantDeleted:{subscribe:function subscribe(){return _pubsub["default"].asyncIterator("PARTICIPANT_DELETED")}}};